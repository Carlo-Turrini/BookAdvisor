<div class="container">
  <h1 class="display-4 pt-3"> Nuovo utente </h1>
  <hr>
  <form [formGroup]="utenteForm" (ngSubmit)="onSubmit()" data-cy="userForm">
    <div class="form-row">
      <div class="form-group col-md-6 mb-3">
        <label for="nome">
          Nome*:
        </label>
        <input type="text" id="nome" formControlName="nome" class="form-control" [class.is-invalid]="isInvalidAndDirty('nome')" data-cy="name">
        <div class="invalid-feedback" *ngIf="hasError('nome', 'required')">
          Inserire un nome!
        </div>
        <div class="invalid-feedback" *ngIf="hasError('nome', 'minlength')">
          Il nome deve avere almeno 2 caratteri!
        </div>
        <div class="invalid-feedback" *ngIf="hasError('nome', 'maxlength')">
          Il nome non può avere più di 24 caratteri!
        </div>
      </div>
      <div class="form-group col-md-6 mb-3">
        <label for="cognome">
          Cognome*:
        </label>
        <input type="text" id="cognome" formControlName="cognome" class="form-control" [class.is-invalid]="isInvalidAndDirty('cognome')" data-cy="surname">
        <div class="invalid-feedback" *ngIf="hasError('cognome', 'required')">
          Inserire un cognome!
        </div>
        <div class="invalid-feedback" *ngIf="hasError('cognome', 'minlength')">
          Il cognome deve avere almeno 2 caratteri!
        </div>
        <div class="invalid-feedback" *ngIf="hasError('cognome', 'maxlength')">
          Il cognome non può avere più di 24 caratteri!
        </div>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-md-6 mb-3">
        <label for="username">
          Username*:
        </label>
        <input type="text" id="username" formControlName="username" class="form-control" [class.is-invalid]="isInvalidAndDirty('username')" data-cy="username">
        <div class="invalid-feedback" *ngIf="hasError('username', 'required')">
          Inserire un username!
        </div>
        <div class="invalid-feedback" *ngIf="hasError('username', 'minlength')">
          Lo username deve avere almeno 5 caratteri!
        </div>
        <div class="invalid-feedback" *ngIf="hasError('username', 'maxlength')">
          Lo username non può avere più di 24 caratteri!
        </div>
        <div class="invalid-feedback" *ngIf="hasError('username', 'usernameTaken')" data-cy="usernameTaken">
         Username già in uso!
        </div>
      </div>
      <div class="form-group col-md-6 mb-3">
        <label for="password">
          Password*:
        </label>
        <input type="password" id="password" formControlName="password" class="form-control" [class.is-invalid]="isInvalidAndDirty('password')" data-cy="password">
        <div class="invalid-feedback" *ngIf="hasError('password', 'required')">
          Inserire una password!
        </div>
        <div class="invalid-feedback" *ngIf="hasError('password', 'minlength')">
          La password deve avere almeno 8 caratteri!
        </div>
        <div class="invalid-feedback" *ngIf="hasError('password', 'maxlength')">
          La password non può avere più di 50 caratteri!
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="email">
        Email*:
      </label>
      <input type="email" id="email" formControlName="email" class="form-control" placeholder="mario.rossi@provider.com" [class.is-invalid]="isInvalidAndDirty('email')" data-cy="email">
      <div class="invalid-feedback" *ngIf="hasError('email', 'required')">
        Inserire un'email!
      </div>
      <div class="invalid-feedback" *ngIf="hasError('email', 'email')">
        Email non valida!
      </div>
      <div class="invalid-feedback" *ngIf="hasError('email', 'emailTaken')" data-cy="emailTaken">
        Email già in uso!
      </div>
    </div>
    <div class="form-group">
      <label for="descrizione">
        Descrizione:
      </label>
      <textarea id="descrizione" formControlName="descrizione" class="form-control" rows="5" [class.is-invalid]="isInvalidAndDirty('descrizione')" data-cy="description"></textarea>
      <div class="invalid-feedback" *ngIf="hasError('descrizione', 'maxlength')">
        La descrizione può contenere al massimo 2048 caratteri!
      </div>
    </div>
    <button type="submit" class="btn btn-info mb-3" [disabled]="!utenteForm.valid">Submit</button>
  </form>
</div>

